# =============================================================================
# B&R Capital Dashboard Interface - Backend Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values
# All variables with defaults can be left unchanged for development
# =============================================================================

# =============================================================================
# REQUIRED SETTINGS (Must be configured)
# =============================================================================

# Security - REQUIRED
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=

# Database - REQUIRED
# PostgreSQL connection string
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/dashboard_interface_data

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Application Info
APP_NAME=B&R Capital Dashboard API
APP_VERSION=2.0.0

# Environment: development, staging, production
ENVIRONMENT=development

# Debug mode (set to false in production)
DEBUG=false

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# =============================================================================
# SERVER SETTINGS
# =============================================================================

# Server host and port
HOST=0.0.0.0
PORT=8000
WORKERS=4

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# JWT Algorithm (HS256 recommended)
ALGORITHM=HS256

# Token expiration
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# CORS SETTINGS
# =============================================================================

# Comma-separated list of allowed origins
# Example: http://localhost:5173,http://localhost:3000,https://yourdomain.com
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173

# =============================================================================
# DATABASE SETTINGS
# =============================================================================

# Connection pool settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30

# =============================================================================
# REDIS SETTINGS
# =============================================================================

# Redis URL for caching and rate limiting
REDIS_URL=redis://localhost:6379/0

# Cache time-to-live in seconds (default: 1 hour)
REDIS_CACHE_TTL=3600

# Maximum Redis connections
REDIS_MAX_CONNECTIONS=50

# =============================================================================
# EMAIL SETTINGS (SMTP)
# =============================================================================

# SMTP server settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_USER=
SMTP_PASSWORD=

# Email sender information
EMAIL_FROM_NAME=Dashboard Interface (B&R Capital)
EMAIL_FROM_ADDRESS=

# Advanced email settings
EMAIL_RATE_LIMIT=60
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_DELAY=300
EMAIL_BATCH_SIZE=10
EMAIL_DEV_MODE=false

# =============================================================================
# SHAREPOINT / AZURE AD INTEGRATION
# =============================================================================

# Azure AD credentials (required for SharePoint integration)
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=

# SharePoint site configuration
SHAREPOINT_SITE_URL=
SHAREPOINT_SITE=BRCapital-Internal
SHAREPOINT_LIBRARY=Real Estate
SHAREPOINT_DEALS_FOLDER=Deals
DEALS_FOLDER=Real Estate/Deals

# =============================================================================
# FILE FILTERING SETTINGS (SharePoint extraction)
# =============================================================================

# Regex pattern for matching UW model filenames
FILE_PATTERN=.*UW\s*Model.*vCurrent.*

# Comma-separated list of substrings to exclude from processing
EXCLUDE_PATTERNS=~$,.tmp,backup,old,archive,Speedboat,vOld

# Valid file extensions (comma-separated)
FILE_EXTENSIONS=.xlsb,.xlsm,.xlsx

# Skip files older than this date (YYYY-MM-DD format, empty to disable)
CUTOFF_DATE=2024-07-15

# Maximum file size in MB
MAX_FILE_SIZE_MB=100

# =============================================================================
# EXTERNAL API KEYS
# =============================================================================

# FRED API key for economic data
# Register at: https://fred.stlouisfed.org/docs/api/api_key.html
FRED_API_KEY=

# =============================================================================
# RATE LIMITING SETTINGS
# =============================================================================

# Enable/disable rate limiting
RATE_LIMIT_ENABLED=true

# Backend: "memory", "redis", or "auto"
RATE_LIMIT_BACKEND=auto

# Default rate limits for API endpoints
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Stricter limits for authentication endpoints
RATE_LIMIT_AUTH_REQUESTS=5
RATE_LIMIT_AUTH_WINDOW=60

# =============================================================================
# WEBSOCKET SETTINGS
# =============================================================================

# WebSocket heartbeat interval in seconds
WS_HEARTBEAT_INTERVAL=30

# Maximum WebSocket connections
WS_MAX_CONNECTIONS=1000

# =============================================================================
# ML MODEL SETTINGS
# =============================================================================

# Path to ML models directory
ML_MODEL_PATH=./models

# ML batch processing size
ML_BATCH_SIZE=32

# Prediction cache TTL in seconds
ML_PREDICTION_CACHE_TTL=300

# =============================================================================
# EXTRACTION SCHEDULER SETTINGS
# =============================================================================

# Enable scheduled extraction
EXTRACTION_SCHEDULE_ENABLED=false

# Cron expression for extraction schedule (default: daily at 2 AM)
EXTRACTION_SCHEDULE_CRON=0 2 * * *

# Timezone for scheduler
EXTRACTION_SCHEDULE_TIMEZONE=America/Phoenix

# =============================================================================
# FILE MONITORING SETTINGS
# =============================================================================

# Enable file change monitoring
FILE_MONITOR_ENABLED=false

# Monitoring interval in minutes
FILE_MONITOR_INTERVAL_MINUTES=30

# Auto-extract when changes detected
AUTO_EXTRACT_ON_CHANGE=true

# Cron expression for monitor checks
MONITOR_CHECK_CRON=*/30 * * * *
