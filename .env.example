# =============================================================================
# B&R Capital Dashboard - Production Docker Compose Environment Variables
# =============================================================================
# Copy this file to .env and fill in the required values
# Variables marked [REQUIRED] must be configured for production deployment
# =============================================================================

# =============================================================================
# DOCKER COMPOSE PRODUCTION - CRITICAL SETTINGS
# =============================================================================
# These variables are directly used by docker-compose.prod.yml

# PostgreSQL Credentials [REQUIRED]
# Generate a strong password: openssl rand -base64 32
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_postgres_password_here

# PostgreSQL Database Name [OPTIONAL - defaults to dashboard_interface_data]
POSTGRES_DB=dashboard_interface_data

# Redis Password [REQUIRED]
# Generate a strong password: openssl rand -base64 32
REDIS_PASSWORD=your_secure_redis_password_here

# Backend Secret Key [REQUIRED]
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=your_secret_key_here_minimum_64_characters

# Backend Workers [OPTIONAL - defaults to 4]
# Set to: (CPU cores * 2) + 1
# For 2 CPU cores: 5, for 4 CPU cores: 9
BACKEND_WORKERS=4

# Frontend Port [OPTIONAL - defaults to 80]
# Use 80 for HTTP, 443 for HTTPS (requires SSL reverse proxy)
FRONTEND_PORT=80

# =============================================================================
# BACKEND APPLICATION SETTINGS
# =============================================================================

# Environment type: production, staging, development
ENVIRONMENT=production

# Debug mode (MUST be false in production)
DEBUG=false

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=info

# Server configuration
HOST=0.0.0.0
PORT=8000

# =============================================================================
# JWT & SECURITY SETTINGS
# =============================================================================

# JWT Algorithm (HS256 recommended)
ALGORITHM=HS256

# Token expiration times
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# CORS SETTINGS
# =============================================================================
# Comma-separated list of allowed origins for production
# Example: https://yourdomain.com,https://api.yourdomain.com
CORS_ORIGINS=https://yourdomain.com

# =============================================================================
# DATABASE SETTINGS
# =============================================================================

# Connection pool configuration
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30

# =============================================================================
# REDIS CACHE SETTINGS
# =============================================================================

# Redis cache TTL in seconds (default: 1 hour = 3600)
REDIS_CACHE_TTL=3600

# Maximum Redis connections
REDIS_MAX_CONNECTIONS=50

# =============================================================================
# EMAIL SETTINGS (SMTP) - OPTIONAL
# =============================================================================

# SMTP Server Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_specific_password

# Email sender information
EMAIL_FROM_NAME=Dashboard Interface (B&R Capital)
EMAIL_FROM_ADDRESS=noreply@yourdomain.com

# Email rate limiting
EMAIL_RATE_LIMIT=60
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_DELAY=300
EMAIL_BATCH_SIZE=10
EMAIL_DEV_MODE=false

# =============================================================================
# AZURE AD & SHAREPOINT INTEGRATION - OPTIONAL
# =============================================================================

# Azure AD Tenant Configuration
AZURE_TENANT_ID=your_tenant_id
AZURE_CLIENT_ID=your_client_id
AZURE_CLIENT_SECRET=your_client_secret

# SharePoint Configuration
SHAREPOINT_SITE_URL=https://yourtenant.sharepoint.com/sites/yoursitename
SHAREPOINT_SITE=BRCapital-Internal
SHAREPOINT_LIBRARY=Real Estate
SHAREPOINT_DEALS_FOLDER=Deals
DEALS_FOLDER=Real Estate/Deals

# =============================================================================
# FILE FILTERING SETTINGS
# =============================================================================

# Regex pattern for matching UW model filenames
FILE_PATTERN=.*UW\s*Model.*vCurrent.*

# Comma-separated list of substrings to exclude
EXCLUDE_PATTERNS=~$,.tmp,backup,old,archive,Speedboat,vOld

# Valid file extensions
FILE_EXTENSIONS=.xlsb,.xlsm,.xlsx

# Skip files older than this date (YYYY-MM-DD format, empty to disable)
CUTOFF_DATE=2024-07-15

# Maximum file size in MB
MAX_FILE_SIZE_MB=100

# =============================================================================
# EXTERNAL API KEYS - OPTIONAL
# =============================================================================

# FRED API Key for economic data
# Register at: https://fred.stlouisfed.org/docs/api/api_key.html
FRED_API_KEY=your_fred_api_key_here

# =============================================================================
# RATE LIMITING SETTINGS
# =============================================================================

# Enable/disable rate limiting
RATE_LIMIT_ENABLED=true

# Backend: "memory", "redis", or "auto" (auto recommended for production)
RATE_LIMIT_BACKEND=auto

# Default rate limits
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Stricter limits for authentication endpoints
RATE_LIMIT_AUTH_REQUESTS=5
RATE_LIMIT_AUTH_WINDOW=60

# =============================================================================
# WEBSOCKET SETTINGS
# =============================================================================

# WebSocket heartbeat interval in seconds
WS_HEARTBEAT_INTERVAL=30

# Maximum WebSocket connections
WS_MAX_CONNECTIONS=1000

# =============================================================================
# ML MODEL SETTINGS - OPTIONAL
# =============================================================================

# Path to ML models directory
ML_MODEL_PATH=./models

# ML batch processing size
ML_BATCH_SIZE=32

# Prediction cache TTL in seconds
ML_PREDICTION_CACHE_TTL=300

# =============================================================================
# EXTRACTION SCHEDULER SETTINGS
# =============================================================================

# Enable scheduled extraction
EXTRACTION_SCHEDULE_ENABLED=false

# Cron expression for extraction schedule (default: daily at 2 AM)
EXTRACTION_SCHEDULE_CRON=0 2 * * *

# Timezone for scheduler
EXTRACTION_SCHEDULE_TIMEZONE=America/Phoenix

# =============================================================================
# FILE MONITORING SETTINGS
# =============================================================================

# Enable file change monitoring
FILE_MONITOR_ENABLED=false

# Monitoring interval in minutes
FILE_MONITOR_INTERVAL_MINUTES=30

# Auto-extract when changes detected
AUTO_EXTRACT_ON_CHANGE=true

# Cron expression for monitor checks
MONITOR_CHECK_CRON=*/30 * * * *

# =============================================================================
# FRONTEND ENVIRONMENT VARIABLES
# =============================================================================
# These are for the frontend Vite build (requires VITE_ prefix)

# Backend API URL for production frontend builds
VITE_API_URL=https://api.yourdomain.com

# WebSocket URL for production
VITE_WS_URL=wss://api.yourdomain.com

# External APIs
VITE_FRED_API_KEY=your_fred_api_key_here

# Feature Flags
VITE_ENABLE_AI_INSIGHTS=true
VITE_ENABLE_REAL_TIME_UPDATES=true
VITE_ENABLE_EXPORT_FEATURES=true

# Analytics (Optional)
# VITE_GA_TRACKING_ID=UA-XXXXXXXXX-X
# VITE_SENTRY_DSN=https://xxxxx@sentry.io/xxxxx

# Development Settings
VITE_DEBUG_MODE=false
VITE_USE_MOCK_DATA=false
